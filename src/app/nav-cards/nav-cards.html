<div class="card-container">
    @for(card of card_data;track card.name){
    <div>
        <ul>
            <div class="card" #trigger (mouseenter)="openOverlay(trigger); setCurrentCategory(card.name)"
                (mouseleave)="closePopup()">
                <li><img src={{card.thumbnail}} alt='card-img'></li>
                <li style="display: flex; flex-direction:row; flex-wrap:nowrap">
                    <p style="font-family: Arial, Helvetica, sans-serif; font: weight 1000px; ">{{card.name}}</p>
                    <img class="cap"
                        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTEiIHZpZXdCb3g9IjAgMCAxNCAxMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZF80OTc0Xzc1OTY5KSI+CjxwYXRoIGQ9Ik0zIDJMNyA2TDExIDIiIHN0cm9rZT0iIzExMTExMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L2c+CjxkZWZzPgo8ZmlsdGVyIGlkPSJmaWx0ZXIwX2RfNDk3NF83NTk2OSIgeD0iMC4yNSIgeT0iMC4yNSIgd2lkdGg9IjEzLjUiIGhlaWdodD0iOS44MTI1IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjEiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMSIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4xNiAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzQ5NzRfNzU5NjkiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfNDk3NF83NTk2OSIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPC9kZWZzPgo8L3N2Zz4K"
                        alt="">
                </li>
            </div>
        </ul>
    </div>
    }
</div>

<ng-template #popup>
    <div class="popup-box" (mouseenter)="keepOpen()" (mouseleave)="closePopup()">
        @for(card of card_data;track card.name){
        @if(card.name==current_category){
        <ul>
            @for(subcategories of card.subcategories;track subcategories.name){
            <li #trigger (mouseenter)="setCurrentSubCategory(subcategories.name); openSubOverlay(trigger);"
                (mouseleave)="closeSubOverlay()">{{subcategories.name}}</li>
            }
        </ul>
        }
        }
    </div>
</ng-template>

<ng-template #popupB>
    <div class="popup-box secondary" (mouseenter)="keepSubOpen()" (mouseleave)="closeSubOverlay()">
        @for(card of card_data;track card.name){
        @for(subcategories of card.subcategories;track subcategories.name){
        @if(subcategories.name==current_sub_category){
        <ul>
            <li><b>More in {{current_sub_category}}</b></li>
            @for(sub of subcategories.items;track $index){
            <li>{{sub}}</li>
            }
        </ul>
        }
        }
        }
    </div>
</ng-template>